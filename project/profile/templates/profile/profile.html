{% extends "header.html" %}
{% block content %}
	{% if viewing == False %}
		{% if session['account']['provider']['is_provider'] == True %}
			{% if session['account']['setup_complete'] == False %}
				<link href="{{ url_for('profile.static', filename = 'css/setup-provider.css') }}" rel="stylesheet">
				{% with messages = get_flashed_messages(with_categories=true) %}
					{% if messages %}
				    	{% for category, message in messages %}
				      		<div class="alert {{ category }}"> {{ message|capitalize }} </div>
				    	{% endfor %}
					{% endif %}
				{% endwith %}
				<form method="POST" action="{{ url_for('api.updateSetupApi') }}" enctype="multipart/form-data">
					<div class="container-fluid">
						<h6>Provider Create Profile</h6>
						<div class="row">
							<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
								<div class="card rounded-0" id="background-info"> 
									<h5><b>BACKGROUND INFO</b></h5>
									<textarea class="form-control" cols="20" rows="10" name="background_info"></textarea>
								</div>
								<br>
								<div class="card rounded-0" id="provided-service">
									<h5><b>WHAT SERVICES DO YOU PROVIDE</b></h5>
									<p><input type="checkbox" id="clean-shoes" name="clean_shoes"> I Clean Shoes</p>
									<p><input type="checkbox" id="shoe-artist" name="shoe_artist"> I'm a Shoe Artist</p>
								</div>
							</div>
							<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
								<div class="card rounded-0" id="write-about-brand">
									<h5><b>WRITE A BIO ABOUT YOURSELF/ BRAND.</b></h5>
									<textarea class="form-control" cols="20" rows="18" name="write_about_brand"></textarea>
									<h5><b>Choose Profile Pic</b></h5>
									<input type="file" name="profile_pic" accept="image/*">
								</div>
								<br>
								<div class="card rounded-0">
									<button class="btn btn-dark" id="update-setup-button">SAVE & SETUP MY SHOP</button>
								</div>
							</div>
						</div>
					</div>
				</form>
				<script type="text/javascript" src="{{ url_for('profile.static', filename='js/setup_provider.js') }}"></script>
			{% else %}
				{% include 'profile/profile-user-managed.html'%}
			{% endif %}
		{% else %}
			{% include 'profile/profile-user-managed.html'%}
		{% endif %}
	{% else %}
		<link href="{{ url_for('profile.static', filename = 'css/profile-view.css') }}" rel="stylesheet">
		<div class="container-fluid">
			<h6>{{ email }}</h6>
			<div class="row">
				<div class="col-2">
					<img src="{{ profile_pic_url }}" id="profile-pic">
				</div>
				<div class="col-10">
					<div class="card rounded-0" id="profile-info-section">
						<div class="row">
							<div id="grouped-profile-info">
								<p>@{{ username }}</p>
								<p>Made {{ number_of_transactions }} Transactions</p>
								<p>{{ city }}</p>
							</div>
							<div class="text-right">
								<p>{{ rating }} star rating</p>
								<button>Message</button>
							</div>
						</div>
					</div>
				</div>
			</div>
			<br>
			<div class="row">
				{% if not posts %}
					<h1>No Posts</h1>
				{% endif %}
				{% for post in posts %}
					<div class="card" id="post-card">
						<p>{{ post.shoe_name }}</p>
						<img src="{{ post.post_pic_url }}">
						<h6>${{ post.cost }}</h6>
						<b><a href="/profile/{{ post.username }}">{{ post.username }}</a></b>
					</div>
				{% endfor %}
			</div>
		</div>
	{% endif %}
{% endblock %}